console.warn( 'Scripts "build/three.js" and "build/three.min.js" are deprecated with r150+, and will be removed with r160. Please use ES Modules or alternatives: https://threejs.org/docs/index.html#manual/en/introduction/Installation' );
/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i((t="undefined"!=typeof globalThis?globalThis:t||self).THREE={})}(this,(function(t){"use strict";const i="150",e=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let s=1234567;const r=Math.PI/180,h=180/Math.PI;function n(){const t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,s=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&i]+e[i>>8&255]+"-"+e[i>>16&15|64]+e[i>>24&255]+"-"+e[63&s|128]+e[s>>8&255]+"-"+e[s>>16&255]+e[s>>24&255]+e[255&r]+e[r>>8&255]+e[r>>16&255]+e[r>>24&255]).toLowerCase()}function a(t,i,e){return Math.max(i,Math.min(e,t))}function o(t,i){return(t%i+i)%i}function l(t,i,e){return(1-e)*t+e*i}const c={DEG2RAD:r,RAD2DEG:h,generateUUID:n,clamp:a,euclideanModulo:o,mapLinear:function(t,i,e,s,r){return s+(t-i)*(r-s)/(e-i)},inverseLerp:function(t,i,e){return t!==i?(e-t)/(i-t):0},lerp:l,damp:function(t,i,e,s){return l(t,i,1-Math.exp(-e*s))},pingpong:function(t,i=1){return i-Math.abs(o(t,2*i)-i)},smoothstep:function(t,i,e){return t<=i?0:t>=e?1:(t=(t-i)/(e-i))*t*(3-2*t)},smootherstep:function(t,i,e){return t<=i?0:t>=e?1:(t=(t-i)/(e-i))*t*t*(t*(6*t-15)+10)},randInt:function(t,i){return t+Math.floor(Math.random()*(i-t+1))},randFloat:function(t,i){return t+Math.random()*(i-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){void 0!==t&&(s=t);let i=s+=1831565813;return i=Math.imul(i^i>>>15,1|i),i^=i+Math.imul(i^i>>>7,61|i),((i^i>>>14)>>>0)/4294967296},degToRad:function(t){return t*r},radToDeg:function(t){return t*h},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,i,e,s,r){const h=Math.cos,n=Math.sin,a=h(e/2),o=n(e/2),l=h((i+s)/2),c=n((i+s)/2),u=h((i-s)/2),m=n((i-s)/2),d=h((s-i)/2),x=n((s-i)/2);switch(r){case"XYX":t.set(a*c,o*u,o*m,a*l);break;case"YZY":t.set(o*m,a*c,o*u,a*l);break;case"ZXZ":t.set(o*u,o*m,a*c,a*l);break;case"XZX":t.set(a*c,o*x,o*d,a*l);break;case"YXY":t.set(o*d,a*c,o*x,a*l);break;case"ZYZ":t.set(o*x,o*d,a*c,a*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:function(t,i){switch(i.constructor){case Float32Array:return t;case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}},denormalize:function(t,i){switch(i.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}};class u{constructor(t=0,i=0,e=0,s=1){this.isQuaternion=!0,this._x=t,this._y=i,this._z=e,this._w=s}static slerpFlat(t,i,e,s,r,h,n){let a=e[s+0],o=e[s+1],l=e[s+2],c=e[s+3];const u=r[h+0],m=r[h+1],d=r[h+2],x=r[h+3];if(0===n)return t[i+0]=a,t[i+1]=o,t[i+2]=l,void(t[i+3]=c);if(1===n)return t[i+0]=u,t[i+1]=m,t[i+2]=d,void(t[i+3]=x);if(c!==x||a!==u||o!==m||l!==d){let t=1-n;const i=a*u+o*m+l*d+c*x,e=i>=0?1:-1,s=1-i*i;if(s>Number.EPSILON){const r=Math.sqrt(s),h=Math.atan2(r,i*e);t=Math.sin(t*h)/r,n=Math.sin(n*h)/r}const r=n*e;if(a=a*t+u*r,o=o*t+m*r,l=l*t+d*r,c=c*t+x*r,t===1-n){const t=1/Math.sqrt(a*a+o*o+l*l+c*c);a*=t,o*=t,l*=t,c*=t}}t[i]=a,t[i+1]=o,t[i+2]=l,t[i+3]=c}static multiplyQuaternionsFlat(t,i,e,s,r,h){const n=e[s],a=e[s+1],o=e[s+2],l=e[s+3],c=r[h],u=r[h+1],m=r[h+2],d=r[h+3];return t[i]=n*d+l*c+a*m-o*u,t[i+1]=a*d+l*u+o*c-n*m,t[i+2]=o*d+l*m+n*u-a*c,t[i+3]=l*d-n*c-a*u-o*m,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,i,e,s){return this._x=t,this._y=i,this._z=e,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,i){const e=t._x,s=t._y,r=t._z,h=t._order,n=Math.cos,a=Math.sin,o=n(e/2),l=n(s/2),c=n(r/2),u=a(e/2),m=a(s/2),d=a(r/2);switch(h){case"XYZ":this._x=u*l*c+o*m*d,this._y=o*m*c-u*l*d,this._z=o*l*d+u*m*c,this._w=o*l*c-u*m*d;break;case"YXZ":this._x=u*l*c+o*m*d,this._y=o*m*c-u*l*d,this._z=o*l*d-u*m*c,this._w=o*l*c+u*m*d;break;case"ZXY":this._x=u*l*c-o*m*d,this._y=o*m*c+u*l*d,this._z=o*l*d+u*m*c,this._w=o*l*c-u*m*d;break;case"ZYX":this._x=u*l*c-o*m*d,this._y=o*m*c+u*l*d,this._z=o*l*d-u*m*c,this._w=o*l*c+u*m*d;break;case"YZX":this._x=u*l*c+o*m*d,this._y=o*m*c+u*l*d,this._z=o*l*d-u*m*c,this._w=o*l*c-u*m*d;break;case"XZY":this._x=u*l*c-o*m*d,this._y=o*m*c-u*l*d,this._z=o*l*d+u*m*c,this._w=o*l*c+u*m*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+h)}return!1!==i&&this._onChangeCallback(),this}setFromAxisAngle(t,i){const e=i/2,s=Math.sin(e);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(e),this._onChangeCallback(),this}setFromRotationMatrix(t){const i=t.elements,e=i[0],s=i[4],r=i[8],h=i[1],n=i[5],a=i[9],o=i[2],l=i[6],c=i[10],u=e+n+c;if(u>0){const t=.5/Math.sqrt(u+1);this._w=.25/t,this._x=(l-a)*t,this._y=(r-o)*t,this._z=(h-s)*t}else if(e>n&&e>c){const t=2*Math.sqrt(1+e-n-c);this._w=(l-a)/t,this._x=.25*t,this._y=(s+h)/t,this._z=(r+o)/t}else if(n>c){const t=2*Math.sqrt(1+n-e-c);this._w=(r-o)/t,this._x=(s+h)/t,this._y=.25*t,this._z=(a+l)/t}else{const t=2*Math.sqrt(1+c-e-n);this._w=(h-s)/t,this._x=(r+o)/t,this._y=(a+l)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,i){let e=t.dot(i)+1;return e<Number.EPSILON?(e=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=e):(this._x=0,this._y=-t.z,this._z=t.y,this._w=e)):(this._x=t.y*i.z-t.z*i.y,this._y=t.z*i.x-t.x*i.z,this._z=t.x*i.y-t.y*i.x,this._w=e),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(a(this.dot(t),-1,1)))}rotateTowards(t,i){const e=this.angleTo(t);if(0===e)return this;const s=Math.min(1,i/e);return this.slerp(t,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,i){const e=t._x,s=t._y,r=t._z,h=t._w,n=i._x,a=i._y,o=i._z,l=i._w;return this._x=e*l+h*n+s*o-r*a,this._y=s*l+h*a+r*n-e*o,this._z=r*l+h*o+e*a-s*n,this._w=h*l-e*n-s*a-r*o,this._onChangeCallback(),this}slerp(t,i){if(0===i)return this;if(1===i)return this.copy(t);const e=this._x,s=this._y,r=this._z,h=this._w;let n=h*t._w+e*t._x+s*t._y+r*t._z;if(n<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,n=-n):this.copy(t),n>=1)return this._w=h,this._x=e,this._y=s,this._z=r,this;const a=1-n*n;if(a<=Number.EPSILON){const t=1-i;return this._w=t*h+i*this._w,this._x=t*e+i*this._x,this._y=t*s+i*this._y,this._z=t*r+i*this._z,this.normalize(),this._onChangeCallback(),this}const o=Math.sqrt(a),l=Math.atan2(o,n),c=Math.sin((1-i)*l)/o,u=Math.sin(i*l)/o;return this._w=h*c+this._w*u,this._x=e*c+this._x*u,this._y=s*c+this._y*u,this._z=r*c+this._z*u,this._onChangeCallback(),this}slerpQuaternions(t,i,e){return this.copy(t).slerp(i,e)}random(){const t=Math.random(),i=Math.sqrt(1-t),e=Math.sqrt(t),s=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(i*Math.cos(s),e*Math.sin(r),e*Math.cos(r),i*Math.sin(s))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,i=0){return this._x=t[i],this._y=t[i+1],this._z=t[i+2],this._w=t[i+3],this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._w,t}fromBufferAttribute(t,i){return this._x=t.getX(i),this._y=t.getY(i),this._z=t.getZ(i),this._w=t.getW(i),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class m{constructor(t=0,i=0,e=0){m.prototype.isVector3=!0,this.x=t,this.y=i,this.z=e}set(t,i,e){return void 0===e&&(e=this.z),this.x=t,this.y=i,this.z=e,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this}applyEuler(t){return this.applyQuaternion(x.setFromEuler(t))}applyAxisAngle(t,i){return this.applyQuaternion(x.setFromAxisAngle(t,i))}applyMatrix3(t){const i=this.x,e=this.y,s=this.z,r=t.elements;return this.x=r[0]*i+r[3]*e+r[6]*s,this.y=r[1]*i+r[4]*e+r[7]*s,this.z=r[2]*i+r[5]*e+r[8]*s,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const i=this.x,e=this.y,s=this.z,r=t.elements,h=1/(r[3]*i+r[7]*e+r[11]*s+r[15]);return this.x=(r[0]*i+r[4]*e+r[8]*s+r[12])*h,this.y=(r[1]*i+r[5]*e+r[9]*s+r[13])*h,this.z=(r[2]*i+r[6]*e+r[10]*s+r[14])*h,this}applyQuaternion(t){const i=this.x,e=this.y,s=this.z,r=t.x,h=t.y,n=t.z,a=t.w,o=a*i+h*s-n*e,l=a*e+n*i-r*s,c=a*s+r*e-h*i,u=-r*i-h*e-n*s;return this.x=o*a+u*-r+l*-n-c*-h,this.y=l*a+u*-h+c*-r-o*-n,this.z=c*a+u*-n+o*-h-l*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const i=this.x,e=this.y,s=this.z,r=t.elements;return this.x=r[0]*i+r[4]*e+r[8]*s,this.y=r[1]*i+r[5]*e+r[9]*s,this.z=r[2]*i+r[6]*e+r[10]*s,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this}clampLength(t,i){const e=this.length();return this.divideScalar(e||1).multiplyScalar(Math.max(t,Math.min(i,e)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this}lerpVectors(t,i,e){return this.x=t.x+(i.x-t.x)*e,this.y=t.y+(i.y-t.y)*e,this.z=t.z+(i.z-t.z)*e,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,i){const e=t.x,s=t.y,r=t.z,h=i.x,n=i.y,a=i.z;return this.x=s*a-r*n,this.y=r*h-e*a,this.z=e*n-s*h,this}projectOnVector(t){const i=t.lengthSq();if(0===i)return this.set(0,0,0);const e=t.dot(this)/i;return this.copy(t).multiplyScalar(e)}projectOnPlane(t){return d.copy(this).projectOnVector(t),this.sub(d)}reflect(t){return this.sub(d.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const i=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===i)return Math.PI/2;const e=this.dot(t)/i;return Math.acos(a(e,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const i=this.x-t.x,e=this.y-t.y,s=this.z-t.z;return i*i+e*e+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,i,e){const s=Math.sin(i)*t;return this.x=s*Math.sin(e),this.y=Math.cos(i)*t,this.z=s*Math.cos(e),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,i,e){return this.x=t*Math.sin(i),this.y=e,this.z=t*Math.cos(i),this}setFromMatrixPosition(t){const i=t.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this}setFromMatrixScale(t){const i=this.setFromMatrixColumn(t,0).length(),e=this.setFromMatrixColumn(t,1).length(),s=this.setFromMatrixColumn(t,2).length();return this.x=i,this.y=e,this.z=s,this}setFromMatrixColumn(t,i){return this.fromArray(t.elements,4*i)}setFromMatrix3Column(t,i){return this.fromArray(t.elements,3*i)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),i=Math.random()*Math.PI*2,e=Math.sqrt(1-t**2);return this.x=e*Math.cos(i),this.y=e*Math.sin(i),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const d=new m,x=new u;class y{constructor(){y.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,i,e,s,r,h,n,a,o,l,c,u,m,d,x,y){const p=this.elements;return p[0]=t,p[4]=i,p[8]=e,p[12]=s,p[1]=r,p[5]=h,p[9]=n,p[13]=a,p[2]=o,p[6]=l,p[10]=c,p[14]=u,p[3]=m,p[7]=d,p[11]=x,p[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new y).fromArray(this.elements)}copy(t){const i=this.elements,e=t.elements;return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[8]=e[8],i[9]=e[9],i[10]=e[10],i[11]=e[11],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15],this}copyPosition(t){const i=this.elements,e=t.elements;return i[12]=e[12],i[13]=e[13],i[14]=e[14],this}setFromMatrix3(t){const i=t.elements;return this.set(i[0],i[3],i[6],0,i[1],i[4],i[7],0,i[2],i[5],i[8],0,0,0,0,1),this}extractBasis(t,i,e){return t.setFromMatrixColumn(this,0),i.setFromMatrixColumn(this,1),e.setFromMatrixColumn(this,2),this}makeBasis(t,i,e){return this.set(t.x,i.x,e.x,0,t.y,i.y,e.y,0,t.z,i.z,e.z,0,0,0,0,1),this}extractRotation(t){const i=this.elements,e=t.elements,s=1/p.setFromMatrixColumn(t,0).length(),r=1/p.setFromMatrixColumn(t,1).length(),h=1/p.setFromMatrixColumn(t,2).length();return i[0]=e[0]*s,i[1]=e[1]*s,i[2]=e[2]*s,i[3]=0,i[4]=e[4]*r,i[5]=e[5]*r,i[6]=e[6]*r,i[7]=0,i[8]=e[8]*h,i[9]=e[9]*h,i[10]=e[10]*h,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromEuler(t){const i=this.elements,e=t.x,s=t.y,r=t.z,h=Math.cos(e),n=Math.sin(e),a=Math.cos(s),o=Math.sin(s),l=Math.cos(r),c=Math.sin(r);if("XYZ"===t.order){const t=h*l,e=h*c,s=n*l,r=n*c;i[0]=a*l,i[4]=-a*c,i[8]=o,i[1]=e+s*o,i[5]=t-r*o,i[9]=-n*a,i[2]=r-t*o,i[6]=s+e*o,i[10]=h*a}else if("YXZ"===t.order){const t=a*l,e=a*c,s=o*l,r=o*c;i[0]=t+r*n,i[4]=s*n-e,i[8]=h*o,i[1]=h*c,i[5]=h*l,i[9]=-n,i[2]=e*n-s,i[6]=r+t*n,i[10]=h*a}else if("ZXY"===t.order){const t=a*l,e=a*c,s=o*l,r=o*c;i[0]=t-r*n,i[4]=-h*c,i[8]=s+e*n,i[1]=e+s*n,i[5]=h*l,i[9]=r-t*n,i[2]=-h*o,i[6]=n,i[10]=h*a}else if("ZYX"===t.order){const t=h*l,e=h*c,s=n*l,r=n*c;i[0]=a*l,i[4]=s*o-e,i[8]=t*o+r,i[1]=a*c,i[5]=r*o+t,i[9]=e*o-s,i[2]=-o,i[6]=n*a,i[10]=h*a}else if("YZX"===t.order){const t=h*a,e=h*o,s=n*a,r=n*o;i[0]=a*l,i[4]=r-t*c,i[8]=s*c+e,i[1]=c,i[5]=h*l,i[9]=-n*l,i[2]=-o*l,i[6]=e*c+s,i[10]=t-r*c}else if("XZY"===t.order){const t=h*a,e=h*o,s=n*a,r=n*o;i[0]=a*l,i[4]=-c,i[8]=o*l,i[1]=t*c+r,i[5]=h*l,i[9]=e*c-s,i[2]=s*c-e,i[6]=n*l,i[10]=r*c+t}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromQuaternion(t){return this.compose(M,t,f)}lookAt(t,i,e){const s=this.elements;return w.subVectors(t,i),0===w.lengthSq()&&(w.z=1),w.normalize(),z.crossVectors(e,w),0===z.lengthSq()&&(1===Math.abs(e.z)?w.x+=1e-4:w.z+=1e-4,w.normalize(),z.crossVectors(e,w)),z.normalize(),g.crossVectors(w,z),s[0]=z.x,s[4]=g.x,s[8]=w.x,s[1]=z.y,s[5]=g.y,s[9]=w.y,s[2]=z.z,s[6]=g.z,s[10]=w.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,i){const e=t.elements,s=i.elements,r=this.elements,h=e[0],n=e[4],a=e[8],o=e[12],l=e[1],c=e[5],u=e[9],m=e[13],d=e[2],x=e[6],y=e[10],p=e[14],_=e[3],M=e[7],f=e[11],z=e[15],g=s[0],w=s[4],b=s[8],A=s[12],S=s[1],F=s[5],C=s[9],v=s[13],T=s[2],E=s[6],k=s[10],R=s[14],O=s[3],D=s[7],W=s[11],U=s[15];return r[0]=h*g+n*S+a*T+o*O,r[4]=h*w+n*F+a*E+o*D,r[8]=h*b+n*C+a*k+o*W,r[12]=h*A+n*v+a*R+o*U,r[1]=l*g+c*S+u*T+m*O,r[5]=l*w+c*F+u*E+m*D,r[9]=l*b+c*C+u*k+m*W,r[13]=l*A+c*v+u*R+m*U,r[2]=d*g+x*S+y*T+p*O,r[6]=d*w+x*F+y*E+p*D,r[10]=d*b+x*C+y*k+p*W,r[14]=d*A+x*v+y*R+p*U,r[3]=_*g+M*S+f*T+z*O,r[7]=_*w+M*F+f*E+z*D,r[11]=_*b+M*C+f*k+z*W,r[15]=_*A+M*v+f*R+z*U,this}multiplyScalar(t){const i=this.elements;return i[0]*=t,i[4]*=t,i[8]*=t,i[12]*=t,i[1]*=t,i[5]*=t,i[9]*=t,i[13]*=t,i[2]*=t,i[6]*=t,i[10]*=t,i[14]*=t,i[3]*=t,i[7]*=t,i[11]*=t,i[15]*=t,this}determinant(){const t=this.elements,i=t[0],e=t[4],s=t[8],r=t[12],h=t[1],n=t[5],a=t[9],o=t[13],l=t[2],c=t[6],u=t[10],m=t[14];return t[3]*(+r*a*c-s*o*c-r*n*u+e*o*u+s*n*m-e*a*m)+t[7]*(+i*a*m-i*o*u+r*h*u-s*h*m+s*o*l-r*a*l)+t[11]*(+i*o*c-i*n*m-r*h*c+e*h*m+r*n*l-e*o*l)+t[15]*(-s*n*l-i*a*c+i*n*u+s*h*c-e*h*u+e*a*l)}transpose(){const t=this.elements;let i;return i=t[1],t[1]=t[4],t[4]=i,i=t[2],t[2]=t[8],t[8]=i,i=t[6],t[6]=t[9],t[9]=i,i=t[3],t[3]=t[12],t[12]=i,i=t[7],t[7]=t[13],t[13]=i,i=t[11],t[11]=t[14],t[14]=i,this}setPosition(t,i,e){const s=this.elements;return t.isVector3?(s[12]=t.x,s[13]=t.y,s[14]=t.z):(s[12]=t,s[13]=i,s[14]=e),this}invert(){const t=this.elements,i=t[0],e=t[1],s=t[2],r=t[3],h=t[4],n=t[5],a=t[6],o=t[7],l=t[8],c=t[9],u=t[10],m=t[11],d=t[12],x=t[13],y=t[14],p=t[15],_=c*y*o-x*u*o+x*a*m-n*y*m-c*a*p+n*u*p,M=d*u*o-l*y*o-d*a*m+h*y*m+l*a*p-h*u*p,f=l*x*o-d*c*o+d*n*m-h*x*m-l*n*p+h*c*p,z=d*c*a-l*x*a-d*n*u+h*x*u+l*n*y-h*c*y,g=i*_+e*M+s*f+r*z;if(0===g)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/g;return t[0]=_*w,t[1]=(x*u*r-c*y*r-x*s*m+e*y*m+c*s*p-e*u*p)*w,t[2]=(n*y*r-x*a*r+x*s*o-e*y*o-n*s*p+e*a*p)*w,t[3]=(c*a*r-n*u*r-c*s*o+e*u*o+n*s*m-e*a*m)*w,t[4]=M*w,t[5]=(l*y*r-d*u*r+d*s*m-i*y*m-l*s*p+i*u*p)*w,t[6]=(d*a*r-h*y*r-d*s*o+i*y*o+h*s*p-i*a*p)*w,t[7]=(h*u*r-l*a*r+l*s*o-i*u*o-h*s*m+i*a*m)*w,t[8]=f*w,t[9]=(d*c*r-l*x*r-d*e*m+i*x*m+l*e*p-i*c*p)*w,t[10]=(h*x*r-d*n*r+d*e*o-i*x*o-h*e*p+i*n*p)*w,t[11]=(l*n*r-h*c*r-l*e*o+i*c*o+h*e*m-i*n*m)*w,t[12]=z*w,t[13]=(l*x*s-d*c*s+d*e*u-i*x*u-l*e*y+i*c*y)*w,t[14]=(d*n*s-h*x*s-d*e*a+i*x*a+h*e*y-i*n*y)*w,t[15]=(h*c*s-l*n*s+l*e*a-i*c*a-h*e*u+i*n*u)*w,this}scale(t){const i=this.elements,e=t.x,s=t.y,r=t.z;return i[0]*=e,i[4]*=s,i[8]*=r,i[1]*=e,i[5]*=s,i[9]*=r,i[2]*=e,i[6]*=s,i[10]*=r,i[3]*=e,i[7]*=s,i[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],e=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],s=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(i,e,s))}makeTranslation(t,i,e){return this.set(1,0,0,t,0,1,0,i,0,0,1,e,0,0,0,1),this}makeRotationX(t){const i=Math.cos(t),e=Math.sin(t);return this.set(1,0,0,0,0,i,-e,0,0,e,i,0,0,0,0,1),this}makeRotationY(t){const i=Math.cos(t),e=Math.sin(t);return this.set(i,0,e,0,0,1,0,0,-e,0,i,0,0,0,0,1),this}makeRotationZ(t){const i=Math.cos(t),e=Math.sin(t);return this.set(i,-e,0,0,e,i,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,i){const e=Math.cos(i),s=Math.sin(i),r=1-e,h=t.x,n=t.y,a=t.z,o=r*h,l=r*n;return this.set(o*h+e,o*n-s*a,o*a+s*n,0,o*n+s*a,l*n+e,l*a-s*h,0,o*a-s*n,l*a+s*h,r*a*a+e,0,0,0,0,1),this}makeScale(t,i,e){return this.set(t,0,0,0,0,i,0,0,0,0,e,0,0,0,0,1),this}makeShear(t,i,e,s,r,h){return this.set(1,e,r,0,t,1,h,0,i,s,1,0,0,0,0,1),this}compose(t,i,e){const s=this.elements,r=i._x,h=i._y,n=i._z,a=i._w,o=r+r,l=h+h,c=n+n,u=r*o,m=r*l,d=r*c,x=h*l,y=h*c,p=n*c,_=a*o,M=a*l,f=a*c,z=e.x,g=e.y,w=e.z;return s[0]=(1-(x+p))*z,s[1]=(m+f)*z,s[2]=(d-M)*z,s[3]=0,s[4]=(m-f)*g,s[5]=(1-(u+p))*g,s[6]=(y+_)*g,s[7]=0,s[8]=(d+M)*w,s[9]=(y-_)*w,s[10]=(1-(u+x))*w,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this}decompose(t,i,e){const s=this.elements;let r=p.set(s[0],s[1],s[2]).length();const h=p.set(s[4],s[5],s[6]).length(),n=p.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),t.x=s[12],t.y=s[13],t.z=s[14],_.copy(this);const a=1/r,o=1/h,l=1/n;return _.elements[0]*=a,_.elements[1]*=a,_.elements[2]*=a,_.elements[4]*=o,_.elements[5]*=o,_.elements[6]*=o,_.elements[8]*=l,_.elements[9]*=l,_.elements[10]*=l,i.setFromRotationMatrix(_),e.x=r,e.y=h,e.z=n,this}makePerspective(t,i,e,s,r,h){const n=this.elements,a=2*r/(i-t),o=2*r/(e-s),l=(i+t)/(i-t),c=(e+s)/(e-s),u=-(h+r)/(h-r),m=-2*h*r/(h-r);return n[0]=a,n[4]=0,n[8]=l,n[12]=0,n[1]=0,n[5]=o,n[9]=c,n[13]=0,n[2]=0,n[6]=0,n[10]=u,n[14]=m,n[3]=0,n[7]=0,n[11]=-1,n[15]=0,this}makeOrthographic(t,i,e,s,r,h){const n=this.elements,a=1/(i-t),o=1/(e-s),l=1/(h-r),c=(i+t)*a,u=(e+s)*o,m=(h+r)*l;return n[0]=2*a,n[4]=0,n[8]=0,n[12]=-c,n[1]=0,n[5]=2*o,n[9]=0,n[13]=-u,n[2]=0,n[6]=0,n[10]=-2*l,n[14]=-m,n[3]=0,n[7]=0,n[11]=0,n[15]=1,this}equals(t){const i=this.elements,e=t.elements;for(let t=0;t<16;t++)if(i[t]!==e[t])return!1;return!0}fromArray(t,i=0){for(let e=0;e<16;e++)this.elements[e]=t[e+i];return this}toArray(t=[],i=0){const e=this.elements;return t[i]=e[0],t[i+1]=e[1],t[i+2]=e[2],t[i+3]=e[3],t[i+4]=e[4],t[i+5]=e[5],t[i+6]=e[6],t[i+7]=e[7],t[i+8]=e[8],t[i+9]=e[9],t[i+10]=e[10],t[i+11]=e[11],t[i+12]=e[12],t[i+13]=e[13],t[i+14]=e[14],t[i+15]=e[15],t}}const p=new m,_=new y,M=new m(0,0,0),f=new m(1,1,1),z=new m,g=new m,w=new m;class b{addEventListener(t,i){void 0===this._listeners&&(this._listeners={});const e=this._listeners;void 0===e[t]&&(e[t]=[]),-1===e[t].indexOf(i)&&e[t].push(i)}hasEventListener(t,i){if(void 0===this._listeners)return!1;const e=this._listeners;return void 0!==e[t]&&-1!==e[t].indexOf(i)}removeEventListener(t,i){if(void 0===this._listeners)return;const e=this._listeners[t];if(void 0!==e){const t=e.indexOf(i);-1!==t&&e.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const i=this._listeners[t.type];if(void 0!==i){t.target=this;const e=i.slice(0);for(let i=0,s=e.length;i<s;i++)e[i].call(this,t);t.target=null}}}const A=new y,S=new u;class F{constructor(t=0,i=0,e=0,s=F.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=e,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,e,s=this._order){return this._x=t,this._y=i,this._z=e,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,e=!0){const s=t.elements,r=s[0],h=s[4],n=s[8],o=s[1],l=s[5],c=s[9],u=s[2],m=s[6],d=s[10];switch(i){case"XYZ":this._y=Math.asin(a(n,-1,1)),Math.abs(n)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-h,r)):(this._x=Math.atan2(m,l),this._z=0);break;case"YXZ":this._x=Math.asin(-a(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(n,d),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(a(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-h,l)):(this._y=0,this._z=Math.atan2(o,r));break;case"ZYX":this._y=Math.asin(-a(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(m,d),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-h,l));break;case"YZX":this._z=Math.asin(a(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(n,d));break;case"XZY":this._z=Math.asin(-a(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(m,l),this._y=Math.atan2(n,r)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===e&&this._onChangeCallback(),this}setFromQuaternion(t,i,e){return A.makeRotationFromQuaternion(t),this.setFromRotationMatrix(A,i,e)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return S.setFromEuler(this),this.setFromQuaternion(S,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}F.DEFAULT_ORDER="XYZ";class C{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}class v{constructor(){v.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,i,e,s,r,h,n,a,o){const l=this.elements;return l[0]=t,l[1]=s,l[2]=n,l[3]=i,l[4]=r,l[5]=a,l[6]=e,l[7]=h,l[8]=o,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const i=this.elements,e=t.elements;return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[8]=e[8],this}extractBasis(t,i,e){return t.setFromMatrix3Column(this,0),i.setFromMatrix3Column(this,1),e.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const i=t.elements;return this.set(i[0],i[4],i[8],i[1],i[5],i[9],i[2],i[6],i[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,i){const e=t.elements,s=i.elements,r=this.elements,h=e[0],n=e[3],a=e[6],o=e[1],l=e[4],c=e[7],u=e[2],m=e[5],d=e[8],x=s[0],y=s[3],p=s[6],_=s[1],M=s[4],f=s[7],z=s[2],g=s[5],w=s[8];return r[0]=h*x+n*_+a*z,r[3]=h*y+n*M+a*g,r[6]=h*p+n*f+a*w,r[1]=o*x+l*_+c*z,r[4]=o*y+l*M+c*g,r[7]=o*p+l*f+c*w,r[2]=u*x+m*_+d*z,r[5]=u*y+m*M+d*g,r[8]=u*p+m*f+d*w,this}multiplyScalar(t){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=t,i[4]*=t,i[7]*=t,i[2]*=t,i[5]*=t,i[8]*=t,this}determinant(){const t=this.elements,i=t[0],e=t[1],s=t[2],r=t[3],h=t[4],n=t[5],a=t[6],o=t[7],l=t[8];return i*h*l-i*n*o-e*r*l+e*n*a+s*r*o-s*h*a}invert(){const t=this.elements,i=t[0],e=t[1],s=t[2],r=t[3],h=t[4],n=t[5],a=t[6],o=t[7],l=t[8],c=l*h-n*o,u=n*a-l*r,m=o*r-h*a,d=i*c+e*u+s*m;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);const x=1/d;return t[0]=c*x,t[1]=(s*o-l*e)*x,t[2]=(n*e-s*h)*x,t[3]=u*x,t[4]=(l*i-s*a)*x,t[5]=(s*r-n*i)*x,t[6]=m*x,t[7]=(e*a-o*i)*x,t[8]=(h*i-e*r)*x,this}transpose(){let t;const i=this.elements;return t=i[1],i[1]=i[3],i[3]=t,t=i[2],i[2]=i[6],i[6]=t,t=i[5],i[5]=i[7],i[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const i=this.elements;return t[0]=i[0],t[1]=i[3],t[2]=i[6],t[3]=i[1],t[4]=i[4],t[5]=i[7],t[6]=i[2],t[7]=i[5],t[8]=i[8],this}setUvTransform(t,i,e,s,r,h,n){const a=Math.cos(r),o=Math.sin(r);return this.set(e*a,e*o,-e*(a*h+o*n)+h+t,-s*o,s*a,-s*(-o*h+a*n)+n+i,0,0,1),this}scale(t,i){return this.premultiply(T.makeScale(t,i)),this}rotate(t){return this.premultiply(T.makeRotation(-t)),this}translate(t,i){return this.premultiply(T.makeTranslation(t,i)),this}makeTranslation(t,i){return this.set(1,0,t,0,1,i,0,0,1),this}makeRotation(t){const i=Math.cos(t),e=Math.sin(t);return this.set(i,-e,0,e,i,0,0,0,1),this}makeScale(t,i){return this.set(t,0,0,0,i,0,0,0,1),this}equals(t){const i=this.elements,e=t.elements;for(let t=0;t<9;t++)if(i[t]!==e[t])return!1;return!0}fromArray(t,i=0){for(let e=0;e<9;e++)this.elements[e]=t[e+i];return this}toArray(t=[],i=0){const e=this.elements;return t[i]=e[0],t[i+1]=e[1],t[i+2]=e[2],t[i+3]=e[3],t[i+4]=e[4],t[i+5]=e[5],t[i+6]=e[6],t[i+7]=e[7],t[i+8]=e[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const T=new v;let E=0;const k=new m,R=new u,O=new y,D=new m,W=new m,U=new m,B=new u,P=new m(1,0,0),L=new m(0,1,0),q=new m(0,0,1),j={type:"added"},N={type:"removed"};class I extends b{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:E++}),this.uuid=n(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=I.DEFAULT_UP.clone();const t=new m,i=new F,e=new u,s=new m(1,1,1);i._onChange((function(){e.setFromEuler(i,!1)})),e._onChange((function(){i.setFromQuaternion(e,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:e},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new y},normalMatrix:{value:new v}}),this.matrix=new y,this.matrixWorld=new y,this.matrixAutoUpdate=I.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=I.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new C,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return R.setFromAxisAngle(t,i),this.quaternion.multiply(R),this}rotateOnWorldAxis(t,i){return R.setFromAxisAngle(t,i),this.quaternion.premultiply(R),this}rotateX(t){return this.rotateOnAxis(P,t)}rotateY(t){return this.rotateOnAxis(L,t)}rotateZ(t){return this.rotateOnAxis(q,t)}translateOnAxis(t,i){return k.copy(t).applyQuaternion(this.quaternion),this.position.add(k.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(P,t)}translateY(t){return this.translateOnAxis(L,t)}translateZ(t){return this.translateOnAxis(q,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(O.copy(this.matrixWorld).invert())}lookAt(t,i,e){t.isVector3?D.copy(t):D.set(t,i,e);const s=this.parent;this.updateWorldMatrix(!0,!1),W.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?O.lookAt(W,D,this.up):O.lookAt(D,W,this.up),this.quaternion.setFromRotationMatrix(O),s&&(O.extractRotation(s.matrixWorld),R.setFromRotationMatrix(O),this.quaternion.premultiply(R.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(j)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(N)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const i=this.children[t];i.parent=null,i.dispatchEvent(N)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),O.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),O.multiply(t.parent.matrixWorld)),t.applyMatrix4(O),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let e=0,s=this.children.length;e<s;e++){const s=this.children[e].getObjectByProperty(t,i);if(void 0!==s)return s}}getObjectsByProperty(t,i){let e=[];this[t]===i&&e.push(this);for(let s=0,r=this.children.length;s<r;s++){const r=this.children[s].getObjectsByProperty(t,i);r.length>0&&(e=e.concat(r))}return e}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(W,t,U),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(W,B,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let e=0,s=i.length;e<s;e++)i[e].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let e=0,s=i.length;e<s;e++)i[e].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let e=0,s=i.length;e<s;e++){const s=i[e];!0!==s.matrixWorldAutoUpdate&&!0!==t||s.updateMatrixWorld(t)}}updateWorldMatrix(t,i){const e=this.parent;if(!0===t&&null!==e&&!0===e.matrixWorldAutoUpdate&&e.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===i){const t=this.children;for(let i=0,e=t.length;i<e;i++){const e=t[i];!0===e.matrixWorldAutoUpdate&&e.updateWorldMatrix(!1,!0)}}}toJSON(t){const i=void 0===t||"string"==typeof t,e={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},e.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};function r(i,e){return void 0===i[e.uuid]&&(i[e.uuid]=e.toJSON(t)),e.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(t.geometries,this.geometry);const i=this.geometry.parameters;if(void 0!==i&&void 0!==i.shapes){const e=i.shapes;if(Array.isArray(e))for(let i=0,s=e.length;i<s;i++){const s=e[i];r(t.shapes,s)}else r(t.shapes,e)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const i=[];for(let e=0,s=this.material.length;e<s;e++)i.push(r(t.materials,this.material[e]));s.material=i}else s.material=r(t.materials,this.material);if(this.children.length>0){s.children=[];for(let i=0;i<this.children.length;i++)s.children.push(this.children[i].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let i=0;i<this.animations.length;i++){const e=this.animations[i];s.animations.push(r(t.animations,e))}}if(i){const i=h(t.geometries),s=h(t.materials),r=h(t.textures),n=h(t.images),a=h(t.shapes),o=h(t.skeletons),l=h(t.animations),c=h(t.nodes);i.length>0&&(e.geometries=i),s.length>0&&(e.materials=s),r.length>0&&(e.textures=r),n.length>0&&(e.images=n),a.length>0&&(e.shapes=a),o.length>0&&(e.skeletons=o),l.length>0&&(e.animations=l),c.length>0&&(e.nodes=c)}return e.object=s,e;function h(t){const i=[];for(const e in t){const s=t[e];delete s.metadata,i.push(s)}return i}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let i=0;i<t.children.length;i++){const e=t.children[i];this.add(e.clone())}return this}}I.DEFAULT_UP=new m(0,1,0),I.DEFAULT_MATRIX_AUTO_UPDATE=!0,I.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;class G extends I{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new y,this.projectionMatrix=new y,this.projectionMatrixInverse=new y}copy(t,i){return super.copy(t,i),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(-i[8],-i[9],-i[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,i){super.updateWorldMatrix(t,i),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class V{constructor(t=0,i=0,e=0,s=1){V.prototype.isVector4=!0,this.x=t,this.y=i,this.z=e,this.w=s}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,i,e,s){return this.x=t,this.y=i,this.z=e,this.w=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this.w=t.w+i.w,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this.w+=t.w*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this.w=t.w-i.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const i=this.x,e=this.y,s=this.z,r=this.w,h=t.elements;return this.x=h[0]*i+h[4]*e+h[8]*s+h[12]*r,this.y=h[1]*i+h[5]*e+h[9]*s+h[13]*r,this.z=h[2]*i+h[6]*e+h[10]*s+h[14]*r,this.w=h[3]*i+h[7]*e+h[11]*s+h[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const i=Math.sqrt(1-t.w*t.w);return i<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/i,this.y=t.y/i,this.z=t.z/i),this}setAxisAngleFromRotationMatrix(t){let i,e,s,r;const h=.01,n=.1,a=t.elements,o=a[0],l=a[4],c=a[8],u=a[1],m=a[5],d=a[9],x=a[2],y=a[6],p=a[10];if(Math.abs(l-u)<h&&Math.abs(c-x)<h&&Math.abs(d-y)<h){if(Math.abs(l+u)<n&&Math.abs(c+x)<n&&Math.abs(d+y)<n&&Math.abs(o+m+p-3)<n)return this.set(1,0,0,0),this;i=Math.PI;const t=(o+1)/2,a=(m+1)/2,_=(p+1)/2,M=(l+u)/4,f=(c+x)/4,z=(d+y)/4;return t>a&&t>_?t<h?(e=0,s=.707106781,r=.707106781):(e=Math.sqrt(t),s=M/e,r=f/e):a>_?a<h?(e=.707106781,s=0,r=.707106781):(s=Math.sqrt(a),e=M/s,r=z/s):_<h?(e=.707106781,s=.707106781,r=0):(r=Math.sqrt(_),e=f/r,s=z/r),this.set(e,s,r,i),this}let _=Math.sqrt((y-d)*(y-d)+(c-x)*(c-x)+(u-l)*(u-l));return Math.abs(_)<.001&&(_=1),this.x=(y-d)/_,this.y=(c-x)/_,this.z=(u-l)/_,this.w=Math.acos((o+m+p-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this.w=Math.max(t.w,Math.min(i.w,this.w)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this.w=Math.max(t,Math.min(i,this.w)),this}clampLength(t,i){const e=this.length();return this.divideScalar(e||1).multiplyScalar(Math.max(t,Math.min(i,e)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this.w+=(t.w-this.w)*i,this}lerpVectors(t,i,e){return this.x=t.x+(i.x-t.x)*e,this.y=t.y+(i.y-t.y)*e,this.z=t.z+(i.z-t.z)*e,this.w=t.w+(i.w-t.w)*e,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this.w=t[i+3],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t[i+3]=this.w,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this.w=t.getW(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:i}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=i),t.ACESFilmicToneMapping=4,t.AddEquation=100,t.AddOperation=2,t.AdditiveAnimationBlendMode=2501,t.AdditiveBlending=2,t.AlphaFormat=1021,t.AlwaysDepth=1,t.AlwaysStencilFunc=519,t.BackSide=1,t.BasicDepthPacking=3200,t.BasicShadowMap=0,t.ByteType=1010,t.Camera=G,t.CineonToneMapping=3,t.ClampToEdgeWrapping=1001,t.CubeReflectionMapping=301,t.CubeRefractionMapping=302,t.CubeUVReflectionMapping=306,t.CullFaceBack=1,t.CullFaceFront=2,t.CullFaceFrontBack=3,t.CullFaceNone=0,t.CustomBlending=5,t.CustomToneMapping=5,t.DecrementStencilOp=7683,t.DecrementWrapStencilOp=34056,t.DepthFormat=1026,t.DepthStencilFormat=1027,t.DisplayP3ColorSpace="display-p3",t.DoubleSide=2,t.DstAlphaFactor=206,t.DstColorFactor=208,t.DynamicCopyUsage=35050,t.DynamicDrawUsage=35048,t.DynamicReadUsage=35049,t.EqualDepth=4,t.EqualStencilFunc=514,t.EquirectangularReflectionMapping=303,t.EquirectangularRefractionMapping=304,t.Euler=F,t.EventDispatcher=b,t.FloatType=1015,t.FrontSide=0,t.GLSL1="100",t.GLSL3="300 es",t.GreaterDepth=6,t.GreaterEqualDepth=5,t.GreaterEqualStencilFunc=518,t.GreaterStencilFunc=516,t.HalfFloatType=1016,t.IncrementStencilOp=7682,t.IncrementWrapStencilOp=34055,t.IntType=1013,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.InvertStencilOp=5386,t.KeepStencilOp=7680,t.Layers=C,t.LessDepth=2,t.LessEqualDepth=3,t.LessEqualStencilFunc=515,t.LessStencilFunc=513,t.LinearEncoding=3e3,t.LinearFilter=1006,t.LinearMipMapLinearFilter=1008,t.LinearMipMapNearestFilter=1007,t.LinearMipmapLinearFilter=1008,t.LinearMipmapNearestFilter=1007,t.LinearSRGBColorSpace="srgb-linear",t.LinearToneMapping=1,t.LoopOnce=2200,t.LoopPingPong=2202,t.LoopRepeat=2201,t.LuminanceAlphaFormat=1025,t.LuminanceFormat=1024,t.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},t.MathUtils=c,t.Matrix3=v,t.Matrix4=y,t.MaxEquation=104,t.MinEquation=103,t.MirroredRepeatWrapping=1002,t.MixOperation=1,t.MultiplyBlending=4,t.MultiplyOperation=0,t.NearestFilter=1003,t.NearestMipMapLinearFilter=1005,t.NearestMipMapNearestFilter=1004,t.NearestMipmapLinearFilter=1005,t.NearestMipmapNearestFilter=1004,t.NeverDepth=0,t.NeverStencilFunc=512,t.NoBlending=0,t.NoColorSpace="",t.NoToneMapping=0,t.NormalAnimationBlendMode=2500,t.NormalBlending=1,t.NotEqualDepth=7,t.NotEqualStencilFunc=517,t.Object3D=I,t.ObjectSpaceNormalMap=1,t.OneFactor=201,t.OneMinusDstAlphaFactor=207,t.OneMinusDstColorFactor=209,t.OneMinusSrcAlphaFactor=205,t.OneMinusSrcColorFactor=203,t.PCFShadowMap=1,t.PCFSoftShadowMap=2,t.PerspectiveCamera=class extends G{constructor(t=50,i=1,e=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=e,this.far=s,this.focus=10,this.aspect=i,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,i){return super.copy(t,i),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const i=.5*this.getFilmHeight()/t;this.fov=2*h*Math.atan(i),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*r*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*h*Math.atan(Math.tan(.5*r*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,i,e,s,r,h){this.aspect=t/i,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=e,this.view.offsetY=s,this.view.width=r,this.view.height=h,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let i=t*Math.tan(.5*r*this.fov)/this.zoom,e=2*i,s=this.aspect*e,h=-.5*s;const n=this.view;if(null!==this.view&&this.view.enabled){const t=n.fullWidth,r=n.fullHeight;h+=n.offsetX*s/t,i-=n.offsetY*e/r,s*=n.width/t,e*=n.height/r}const a=this.filmOffset;0!==a&&(h+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(h,h+s,i,i-e,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const i=super.toJSON(t);return i.object.fov=this.fov,i.object.zoom=this.zoom,i.object.near=this.near,i.object.far=this.far,i.object.focus=this.focus,i.object.aspect=this.aspect,null!==this.view&&(i.object.view=Object.assign({},this.view)),i.object.filmGauge=this.filmGauge,i.object.filmOffset=this.filmOffset,i}},t.Quaternion=u,t.RED_GREEN_RGTC2_Format=36285,t.RED_RGTC1_Format=36283,t.REVISION=i,t.RGBADepthPacking=3201,t.RGBAFormat=1023,t.RGBAIntegerFormat=1033,t.RGBA_ASTC_10x10_Format=37819,t.RGBA_ASTC_10x5_Format=37816,t.RGBA_ASTC_10x6_Format=37817,t.RGBA_ASTC_10x8_Format=37818,t.RGBA_ASTC_12x10_Format=37820,t.RGBA_ASTC_12x12_Format=37821,t.RGBA_ASTC_4x4_Format=37808,t.RGBA_ASTC_5x4_Format=37809,t.RGBA_ASTC_5x5_Format=37810,t.RGBA_ASTC_6x5_Format=37811,t.RGBA_ASTC_6x6_Format=37812,t.RGBA_ASTC_8x5_Format=37813,t.RGBA_ASTC_8x6_Format=37814,t.RGBA_ASTC_8x8_Format=37815,t.RGBA_BPTC_Format=36492,t.RGBA_ETC2_EAC_Format=37496,t.RGBA_PVRTC_2BPPV1_Format=35843,t.RGBA_PVRTC_4BPPV1_Format=35842,t.RGBA_S3TC_DXT1_Format=33777,t.RGBA_S3TC_DXT3_Format=33778,t.RGBA_S3TC_DXT5_Format=33779,t.RGB_ETC1_Format=36196,t.RGB_ETC2_Format=37492,t.RGB_PVRTC_2BPPV1_Format=35841,t.RGB_PVRTC_4BPPV1_Format=35840,t.RGB_S3TC_DXT1_Format=33776,t.RGFormat=1030,t.RGIntegerFormat=1031,t.RedFormat=1028,t.RedIntegerFormat=1029,t.ReinhardToneMapping=2,t.RepeatWrapping=1e3,t.ReplaceStencilOp=7681,t.ReverseSubtractEquation=102,t.SIGNED_RED_GREEN_RGTC2_Format=36286,t.SIGNED_RED_RGTC1_Format=36284,t.SRGBColorSpace="srgb",t.Scene=class extends I{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,i){return super.copy(t,i),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const i=super.toJSON(t);return null!==this.fog&&(i.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(i.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(i.object.backgroundIntensity=this.backgroundIntensity),i}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}},t.ShortType=1011,t.SrcAlphaFactor=204,t.SrcAlphaSaturateFactor=210,t.SrcColorFactor=202,t.StaticCopyUsage=35046,t.StaticDrawUsage=35044,t.StaticReadUsage=35045,t.StreamCopyUsage=35042,t.StreamDrawUsage=35040,t.StreamReadUsage=35041,t.SubtractEquation=101,t.SubtractiveBlending=3,t.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},t.TangentSpaceNormalMap=0,t.TriangleFanDrawMode=2,t.TriangleStripDrawMode=1,t.TrianglesDrawMode=0,t.TwoPassDoubleSide=2,t.UVMapping=300,t.UnsignedByteType=1009,t.UnsignedInt248Type=1020,t.UnsignedIntType=1014,t.UnsignedShort4444Type=1017,t.UnsignedShort5551Type=1018,t.UnsignedShortType=1012,t.VSMShadowMap=3,t.Vector3=m,t.Vector4=V,t.WrapAroundEnding=2402,t.ZeroCurvatureEnding=2400,t.ZeroFactor=200,t.ZeroSlopeEnding=2401,t.ZeroStencilOp=0,t._SRGBAFormat=1035,t.sRGBEncoding=3001}));
